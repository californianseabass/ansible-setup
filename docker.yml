---

- name: install docker on ubuntu/debian using apt-get
  hosts: local
  connection: local
  become: yes
  tasks:
          - name: make sure deps are installed
            apt:
                    name: "{{ item }}"
                    update_cache: yes
                    cache_valid_time: 86400 # One day
            with_items:
                   - apt-transport-https
                   - ca-certificates
                   - curl
                   - gnupg-agent
                   - software-properties-common
          - name: install docker gpg apt key
            apt_key:
                    url: https://download.docker.com/linux/ubuntu/gpg
          - name: add docker repository
            apt_repository:
                    repo: deb https://download.docker.com/linux/ubuntu bionic stable
                    state: present
          - name: install docker through apt
            apt:
                    name: "{{ item }}"
                    update_cache: yes
                    cache_valid_time: 86400 # One day
            with_items:
                   - docker-ce
                   - docker-ce-cli
                   - containerd.io
 
